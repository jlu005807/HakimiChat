# 哈基米聊天室 (HakimiChat)

一个基于局域网的 Android 即时通讯应用，支持多人聊天和在线游戏功能。

## 📱 应用简介

哈基米聊天室是一款轻量级的局域网聊天应用，无需互联网连接，只需在同一 WiFi 或手机热点下即可使用。适用于办公室、家庭、聚会等场景的即时通讯和娱乐互动。

## ✨ 主要功能

### 🏠 房间管理
- **创建房间**：任意用户可以创建聊天室，成为房主
- **加入房间**：通过房间号快速加入已创建的房间
- **房间号系统**：自动生成易记的房间码，便于分享

### 💬 即时通讯
- **实时消息**：低延迟的消息发送和接收
- **消息历史**：新成员加入时自动同步历史消息
- **在线状态**：实时显示在线人数
- **成员列表**：查看所有在线成员

### 👑 房主权限
- **踢出成员**：房主可以移除不当行为的成员
- **成员管理**：查看和管理所有在线成员

### 🎮 游戏功能
- **游戏面板**：所有成员均可访问游戏列表
- **发起游戏**：任何人都可以发起游戏邀请
- **多种模式**：
  - 指定玩家对战
  - 开放式游戏（先到先得）
- **观战功能**：支持其他成员观看游戏进行
- **实时同步**：游戏状态实时同步给所有玩家和观战者

#### 当前支持的游戏
- **井字棋 (Tic-Tac-Toe)**：经典的双人对战游戏

## 🔧 技术特性

### 网络通信
- **局域网连接**：基于 TCP/IP 协议
- **服务器-客户端架构**：房主作为服务器，其他成员作为客户端
- **消息广播**：支持多播消息分发
- **断线检测**：自动检测并处理连接断开

### 用户体验
- **昵称系统**：自动生成"哈基米"系列昵称，避免重复
- **主题支持**：支持浅色/深色主题切换
- **输入法优化**：智能键盘和游戏面板切换，适配 Android 15
- **流畅动画**：平滑的界面过渡效果

### 游戏系统
- **游戏管理器**：统一管理所有游戏会话
- **状态同步**：实时同步游戏状态
- **观战系统**：独立的观战者逻辑，不影响游戏进行
- **断线处理**：玩家退出时的智能处理

## 📋 使用说明

### 创建房间
1. 打开应用，点击"创建房间"
2. 输入您的昵称（可选，系统会自动生成）
3. 应用会显示房间号和 IP 地址
4. 将房间号分享给其他人

### 加入房间
1. 打开应用，点击"加入房间"
2. 输入房间号或 IP 地址
3. 输入您的昵称（可选）
4. 点击"加入"即可进入房间

### 发送消息
1. 在输入框中输入消息
2. 点击发送按钮
3. 消息会立即发送给房间内所有成员

### 查看成员
1. 点击顶部的在线人数
2. 查看所有在线成员列表
3. 房主可以在成员列表处进行踢出操作

### 玩游戏
1. 点击输入框旁的按钮
2. 从游戏面板选择游戏
3. 选择邀请的玩家（或所有人）
4. 等待对方加入或开始游戏
5. 其他成员可以选择观战

## 🛠️ 技术栈

- **开发语言**：Java
- **最低 SDK**：Android 7.0 (API 24)
- **目标 SDK**：Android 15 (API 35)
- **构建工具**：Gradle
- **网络通信**：Java Socket
- **UI 组件**：RecyclerView, CardView, Material Design

## 📁 项目结构

```
HakimiChat/
├── app/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/example/hakimichat/
│   │   │   │   ├── MainActivity.java          # 主界面（创建/加入房间）
│   │   │   │   ├── RoomActivity.java          # 聊天室界面
│   │   │   │   ├── ServerManager.java         # 服务器管理
│   │   │   │   ├── ClientManager.java         # 客户端管理
│   │   │   │   ├── Message.java               # 消息模型
│   │   │   │   ├── MessageAdapter.java        # 消息适配器
│   │   │   │   ├── ThemeManager.java          # 主题管理
│   │   │   │   └── game/                      # 游戏模块
│   │   │   │       ├── GameManager.java       # 游戏管理器
│   │   │   │       ├── Game.java              # 游戏接口
│   │   │   │       ├── BaseGame.java          # 游戏基类
│   │   │   │       ├── TicTacToeGame.java     # 井字棋逻辑
│   │   │   │       └── TicTacToeActivity.java # 井字棋界面
│   │   │   └── res/
│   │   │       ├── layout/                     # 布局文件
│   │   │       ├── drawable/                   # 图片资源
│   │   │       ├── anim/                       # 动画资源
│   │   │       └── values/                     # 配置文件
│   └── build.gradle.kts
├── gradle/
└── README.md
```

## 🚀 编译和运行

### 前置要求
- Android Studio Arctic Fox 或更高版本
- JDK 11 或更高版本
- Android SDK 24 或更高版本

### 编译步骤
1. 克隆项目到本地
   ```bash
   git clone https://github.com/jlu005807/HakimiChat.git
   ```

2. 使用 Android Studio 打开项目

3. 等待 Gradle 同步完成

4. 连接 Android 设备或启动模拟器

5. 点击运行按钮或执行
   ```bash
   ./gradlew assembleDebug
   ```

## 📝 注意事项

- **网络权限**：应用需要网络权限，首次运行时需要授权
- **局域网环境**：确保所有设备在同一网络下
- **防火墙**：某些设备可能需要关闭防火墙或允许应用通过
- **端口占用**：默认使用 8888 端口，确保端口未被占用
- **Android 版本**：建议使用 Android 7.0 及以上版本

## 🔮 未来计划

- [ ] 添加更多游戏（五子棋、象棋等）
- [ ] 支持发送图片和文件
- [ ] 添加语音消息功能
- [ ] 房间密码保护
- [ ] 消息加密
- [ ] 表情包支持
- [ ] 聊天记录保存

## 🐛 已知问题

- 在某些设备上切换输入法和游戏面板时可能有轻微延迟
- 网络环境不稳定时可能出现消息延迟


## 📄 许可证

本项目采用 MIT 许可证，详细内容见仓库根目录的 `LICENSE` 文件。

简要说明：

- 你可以免费使用、复制、修改、合并、发布、分发、再许可及/或出售本软件的副本（见 `LICENSE` 中的完整条款）。
- 使用本软件即表示接受 MIT 许可证条款。

更多信息请参见：`LICENSE`

## 🙏 致谢

感谢所有为这个项目提供建议和反馈的用户！

---

**享受哈基米聊天室带来的便捷通讯和游戏体验！** 🎉
